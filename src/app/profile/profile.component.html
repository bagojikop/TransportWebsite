<div class="profile-wrapper">
  <!-- Sidebar Component -->
  <app-sidebar></app-sidebar>

  <!-- Main Content -->
  <div class="main-content">
    <div class="profile-container">
      <!-- Header -->
      <div class="header">
        <div>
          <h1>Profile</h1>
          <p class="sub-header">Manage your personal information</p>
        </div>
        <div class="header-actions">
          <button class="edit-btn" (click)="toggleEdit()">
            <svg *ngIf="!isEditing" viewBox="0 0 24 24" width="18" height="18">
              <path fill="currentColor" d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/>
            </svg>
            {{ isEditing ? 'Cancel' : 'Edit Profile' }}
          </button>
        </div>
      </div>

      <!-- Profile Card -->
      <div class="profile-card">
        <!-- Profile Avatar Section -->
        <div class="profile-avatar-section">
          <div class="avatar-large">{{ getInitials() }}</div>
          <div class="avatar-info">
            <h3>{{ profileData.fullName }}</h3>
            <p>{{ profileData.email }}</p>
          </div>
        </div>
        
        <!-- View Mode -->
        <div class="profile-details" *ngIf="!isEditing">
          <div class="details-grid">
            <div class="detail-item">
              <span class="detail-label">Full Name</span>
              <span class="detail-value">{{ profileData.fullName }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Email Address</span>
              <span class="detail-value">{{ profileData.email }}</span>
            </div>
            <div class="detail-item">
              <span class="detail-label">Contact Number</span>
              <span class="detail-value">{{ profileData.contactNo }}</span>
            </div>
            <div class="detail-item full-width">
              <span class="detail-label">Address</span>
              <span class="detail-value address-text">{{ profileData.address || 'Not provided' }}</span>
            </div>
          </div>
        </div>

        <!-- Edit Mode -->
        <div class="profile-edit" *ngIf="isEditing">
          <form #profileForm="ngForm">
            <div class="form-row">
              <div class="form-group">
                <label>Full Name <span class="required">*</span></label>
                <input 
                  type="text" 
                  name="fullName"
                  class="form-control"
                  placeholder="Enter your full name"
                  [(ngModel)]="profileData.fullName"
                  #fullName="ngModel"
                  required
                />
                <div *ngIf="fullName.invalid && fullName.touched" class="error-message">
                  Full name is required
                </div>
              </div>

              <div class="form-group">
                <label>Email Address <span class="required">*</span></label>
                <input 
                  type="email" 
                  name="email"
                  class="form-control"
                  placeholder="Enter your email"
                  [(ngModel)]="profileData.email"
                  #email="ngModel"
                  required
                  email
                />
                <div *ngIf="email.invalid && email.touched" class="error-message">
                  Please enter a valid email address
                </div>
              </div>
            </div>

            <div class="form-row">
              <div class="form-group">
                <label>Contact Number <span class="required">*</span></label>
                <input 
                  type="tel" 
                  name="contactNo"
                  class="form-control"
                  placeholder="+91 98765 43210"
                  [(ngModel)]="profileData.contactNo"
                  #contactNo="ngModel"
                  required
                  pattern="^[+][0-9]{1,3}[0-9]{10}$"
                />
                <div *ngIf="contactNo.invalid && contactNo.touched" class="error-message">
                  Please enter a valid contact number (e.g., +91 9876543210)
                </div>
              </div>

              <div class="form-group">
                <label>Address</label>
                <input 
                  type="text" 
                  name="address"
                  class="form-control"
                  placeholder="Enter your address"
                  [(ngModel)]="profileData.address"
                />
              </div>
            </div>

            <div class="form-actions">
              <button type="button" class="btn-cancel" (click)="toggleEdit()">Cancel</button>
              <button type="button" class="btn-save" (click)="saveProfile()" [disabled]="profileForm.invalid">
                Save Changes
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="user-creation-wrapper">
  <!-- Sidebar Component -->
  <app-sidebar></app-sidebar>

  <!-- Main Content -->
  <div class="main-content">
    <div class="user-creation-container">
      <!-- Header -->
      <div class="header" *ngIf="!userData.userId">
        <h1>Create New User</h1>
        <p class="sub-header">Add a new user to the system</p>
      </div>

       <div class="header" *ngIf="userData.userId">
        <h1>Update User</h1>
        <p class="sub-header">update user to the system</p>
      </div>
      <!-- Form Card -->
      <div class="form-card">
        <form #userForm="ngForm">
          <!-- Name -->
          <div class="form-group">
            <label for="name">Full Name <span class="required">*</span></label>
            <input 
              type="text" 
              id="name" 
              name="name" 
              class="form-control"
              placeholder="Enter full name"
              [(ngModel)]="userData.userLongname"
              #name="ngModel"
              required
            />
            <div *ngIf="name.invalid && name.touched" class="error-message">
              Full name is required
            </div>
          </div>

          <!-- Mobile No -->
          <div class="form-group">
            <label for="mobileNo">Mobile No <span class="required">*</span></label>
            <input 
              type="tel" 
              id="mobileNo" 
              name="mobileNo" 
              class="form-control"
              placeholder="Enter mobile number"
              [(ngModel)]="userData.mobileno"
              #mobileNo="ngModel"
              required
              pattern="^[0-9]{10}$"
              maxlength="10"
            />
            <div *ngIf="mobileNo.invalid && mobileNo.touched" class="error-message">
              Enter a valid 10-digit mobile number
            </div>
          </div>

          <!-- Email ID -->
          <div class="form-group">
            <label for="email">Email ID <span class="required">*</span></label>
            <input 
              type="email" 
              id="email" 
              name="email" 
              class="form-control"
              placeholder="Enter email address"
              [(ngModel)]="userData.emailId"
              #email="ngModel"
              required
              email
            />
            <div *ngIf="email.invalid && email.touched" class="error-message">
              Enter a valid email address
            </div>
          </div>

          
          <!-- Username -->
          <div class="form-group" *ngIf="!userData.userId">
            <label for="username">Username <span class="required">*</span></label>
            <input 
              type="text" 
              id="username" 
              name="username" 
              class="form-control"
              placeholder="Enter username"
              [(ngModel)]="userData.userName"
              #username="ngModel"
              required
              minlength="4"
            />
            <div *ngIf="username.invalid && username.touched" class="error-message">
              <span *ngIf="username.errors?.['required']">Username is required</span>
              <span *ngIf="username.errors?.['minlength']">Username must be at least 4 characters</span>
            </div>
          </div>

          <!-- Password with Generate Button -->
          <div class="form-group" *ngIf="!userData.userId">
            <label for="password">Password <span class="required">*</span></label>
            <div class="password-container">
              <div class="password-input-wrapper">
                <input 
                  [type]="isPasswordVisible ? 'text' : 'password'"
                  id="password" 
                  name="password" 
                  class="form-control password-input"
                  placeholder="Enter password"
                  [(ngModel)]="userData.cred!.password"
                  #password="ngModel"
                  required
                  minlength="6"
                />
                <button 
                  type="button" 
                  class="toggle-password"
                  (click)="togglePasswordVisibility()"
                  title="{{ isPasswordVisible ? 'Hide password' : 'Show password' }}"
                >
                  <svg *ngIf="!isPasswordVisible" viewBox="0 0 24 24" width="18" height="18">
                    <path fill="currentColor" d="M12 4.5C7 4.5 2.7 7.6 1 12c1.7 4.4 6 7.5 11 7.5s9.3-3.1 11-7.5c-1.7-4.4-6-7.5-11-7.5zM12 17c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zm0-8c-1.7 0-3 1.3-3 3s1.3 3 3 3 3-1.3 3-3-1.3-3-3-3z"/>
                  </svg>
                  <svg *ngIf="isPasswordVisible" viewBox="0 0 24 24" width="18" height="18">
                    <path fill="currentColor" d="M12 7c2.8 0 5 2.2 5 5 0 .9-.2 1.7-.7 2.5l3.5 3.5c1.2-1.2 2.1-2.6 2.8-4-1.7-4.4-6-7.5-11-7.5-1.2 0-2.4.2-3.5.6l2.5 2.5c.8-.5 1.7-.7 2.6-.7zm-9.9-4.5l2.1 2.1L4 6.6 2.8 5.4 4.1 4.1 2.1 2.1 3.5.7 19.9 17.1 18.5 18.5 16.3 16.3C14.9 17 13.5 17.5 12 17.5c-5 0-9.3-3.1-11-7.5.9-2.3 2.4-4.3 4.2-5.9L4.5 4.5 2.1 2.5zM8.5 8.8L9.8 10c-.1.3-.2.6-.2 1 0 1.4 1.1 2.5 2.5 2.5.4 0 .7-.1 1-.2l1.3 1.3c-.7.4-1.5.6-2.3.6-2.8 0-5-2.2-5-5 0-.8.2-1.6.6-2.3l.8.8z"/>
                  </svg>
                </button>
              </div>
              <button 
                type="button" 
                class="btn-generate" 
                (click)="generatePassword()"
                title="Generate strong password"
              >
                <svg viewBox="0 0 24 24" width="16" height="16">
                  <path fill="currentColor" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67V7z"/>
                </svg>
                Generate
              </button>
            </div>
            <div *ngIf="password.invalid && password.touched" class="error-message">
              <span *ngIf="password.errors?.['required']">Password is required</span>
              <span *ngIf="password.errors?.['minlength']">Password must be at least 6 characters</span>
            </div>
            <div class="password-strength" *ngIf="userData.cred?.password">
              <div class="strength-bar" [class]="getPasswordStrengthClass()"></div>
              <span class="strength-text">{{ getPasswordStrengthText() }}</span>
            </div>
          </div>



           
          <!-- Form Actions -->
          <div class="form-actions">
            <button type="button" class="btn btn-cancel" (click)="cancel()">Cancel</button>
            <button 
              type="submit" 
              class="btn btn-save" 
              [disabled]="userForm.invalid"
              (click)="saveUser()"
            >
              <svg viewBox="0 0 24 24" width="16" height="16">
                <path fill="currentColor" d="M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm4-10H5V5h11v4z"/>
              </svg>
              Save User
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
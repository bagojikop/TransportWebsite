<app-sidebar></app-sidebar>
<div class="tenant-creation-container">
  <div class="header">
    <h1>Create New Tenant</h1>
    <p class="sub-header">Add a new tenant to your DSS ERP system</p>
  </div>

  <div class="form-card">
    <form #tenantForm="ngForm">
      <!-- Company Name -->
      <div class="form-group">
        <label for="companyName">
          Company Name <span class="required">*</span>
        </label>
        <input 
          type="text" 
          id="companyName" 
          name="companyName" 
          class="form-control"
          placeholder="Enter company name"
          [(ngModel)]="tenantData.name"
          #companyName="ngModel"
          required
        />
        <div *ngIf="companyName.invalid && companyName.touched" class="error-message">
          Company name is required
        </div>
      </div>

      <!-- Sub Domain -->
      <div class="form-group">
        <label for="subDomain">
          Sub Domain <span class="required">*</span>
        </label>
        <div class="input-with-prefix">
          <span class="prefix">https://</span>
          <input 
            type="text" 
            id="subDomain" 
            name="subDomain" 
            class="form-control with-prefix"
            placeholder="your-company"
            [(ngModel)]="tenantData.subdomain"
            #subDomain="ngModel"
            required
            pattern="^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$"
          />
          <span class="suffix">.veererp.com</span>
        </div>
        <div *ngIf="subDomain.invalid && subDomain.touched" class="error-message">
          <span *ngIf="subDomain.errors?.['required']">Sub domain is required</span>
          <span *ngIf="subDomain.errors?.['pattern']">Invalid sub domain format (use only lowercase letters, numbers, and hyphens)</span>
        </div>
        <div class="hint">Your tenant URL will be: https://{{tenantData.subdomain || '*' }}.veererp.com</div>
      </div>

      <!-- License Key
      <div class="form-group">
        <label for="licenseKey">
          License Key <span class="required">*</span>
        </label>
        <div class="license-input-wrapper">
          <input 
            [type]="isLicenseVisible ? 'text' : 'password'"
            id="licenseKey" 
            name="licenseKey" 
            class="form-control"
            placeholder="Enter license key"
            [(ngModel)]="tenantData.licenseKey"
            #licenseKey="ngModel"
            required
            minlength="16"
          />
          <button 
            type="button" 
            class="toggle-license-btn"
            (click)="toggleLicenseVisibility()"
          >
            <svg *ngIf="!isLicenseVisible" viewBox="0 0 24 24" width="20" height="20">
              <path fill="currentColor" d="M12 4.5C7 4.5 2.7 7.6 1 12c1.7 4.4 6 7.5 11 7.5s9.3-3.1 11-7.5c-1.7-4.4-6-7.5-11-7.5zM12 17c-2.8 0-5-2.2-5-5s2.2-5 5-5 5 2.2 5 5-2.2 5-5 5zm0-8c-1.7 0-3 1.3-3 3s1.3 3 3 3 3-1.3 3-3-1.3-3-3-3z"/>
            </svg>
            <svg *ngIf="isLicenseVisible" viewBox="0 0 24 24" width="20" height="20">
              <path fill="currentColor" d="M12 7c2.8 0 5 2.2 5 5 0 .9-.2 1.7-.7 2.5l3.5 3.5c1.2-1.2 2.1-2.6 2.8-4-1.7-4.4-6-7.5-11-7.5-1.2 0-2.4.2-3.5.6l2.5 2.5c.8-.5 1.7-.7 2.6-.7zm-9.9-4.5l2.1 2.1L4 6.6 2.8 5.4 4.1 4.1 2.1 2.1 3.5.7 19.9 17.1 18.5 18.5 16.3 16.3C14.9 17 13.5 17.5 12 17.5c-5 0-9.3-3.1-11-7.5.9-2.3 2.4-4.3 4.2-5.9L4.5 4.5 2.1 2.5zM8.5 8.8L9.8 10c-.1.3-.2.6-.2 1 0 1.4 1.1 2.5 2.5 2.5.4 0 .7-.1 1-.2l1.3 1.3c-.7.4-1.5.6-2.3.6-2.8 0-5-2.2-5-5 0-.8.2-1.6.6-2.3l.8.8z"/>
            </svg>
          </button>
        </div>
        <div *ngIf="licenseKey.invalid && licenseKey.touched" class="error-message">
          <span *ngIf="licenseKey.errors?.['required']">License key is required</span>
          <span *ngIf="licenseKey.errors?.['minlength']">License key must be at least 16 characters</span>
        </div>
        <div class="hint">Format: XXXXX-XXXXX-XXXXX-XXXXX</div>
      </div> -->

     
      <!-- Form Actions -->
        <div *ngIf="formMessage" class="alert alert-info p-2 mb-3 small" [ngClass]="{'alert-danger': isError}">
            <i class="fas" [class.fa-info-circle]="!isError" [class.fa-exclamation-triangle]="isError"></i>
            {{formMessage}}
          </div>
          
      <div class="form-actions">
        <button type="button" class="btn btn-cancel" (click)="cancel()">Cancel</button>
        <button 
          type="submit" 
          class="btn btn-submit" 
          [disabled]="tenantForm.invalid"
          (click)="createTenant()"
        >
          Create Tenant
        </button>
      </div>

    </form>
  </div>
</div>
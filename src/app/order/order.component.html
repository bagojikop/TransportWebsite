<div class="order-wrapper">
  <!-- Main Content -->
  <div class="main-content">
    <div class="order-container">
      <!-- Header -->
      <div class="header">
        <h1>Complete Your Order</h1>
        <p class="sub-header">You're just one step away from getting started</p>
      </div>

      <div class="order-grid">
        <!-- Left Column - Order Summary (Monthly) -->
        <div class="order-summary">
          <div class="summary-card">
            <h2>Order Summary <span class="billing-badge monthly">Monthly</span></h2>
            
            <!-- Selected Plan -->
            <div class="selected-plan">
              <div class="plan-badge">Selected Plan</div>
              <div class="plan-details">
                <div class="plan-name">Basic Plan</div>
                <div class="plan-price">₹1,000 <span class="price-period">/month</span></div>
              </div>
            </div>

            <!-- Users Selection -->
            <div class="selection-item">
              <div class="selection-header">
                <span class="item-label">Users</span>
                <span class="item-price">₹250 per additional user</span>
              </div>
              <div class="counter-row">
                <div class="counter-control">
                  <button class="counter-btn" (click)="decreaseUsers()" [disabled]="users <= 1">−</button>
                  <span class="counter-value">{{ users }}</span>
                  <button class="counter-btn" (click)="increaseUsers()" [disabled]="users >= maxUsers">+</button>
                </div>
                <div class="item-total">+ ₹{{ additionalUsersCost }}</div>
              </div>
            </div>

            <!-- Firms Selection -->
            <div class="selection-item">
              <div class="selection-header">
                <span class="item-label">Firms</span>
                <span class="item-price">₹250 per additional firm</span>
              </div>
              <div class="counter-row">
                <div class="counter-control">
                  <button class="counter-btn" (click)="decreaseFirms()" [disabled]="firms <= 1">−</button>
                  <span class="counter-value">{{ firms }}</span>
                  <button class="counter-btn" (click)="increaseFirms()">+</button>
                </div>
                <div class="item-total">+ ₹{{ additionalFirmsCost }}</div>
              </div>
            </div>

            <!-- Add-Ons -->
            <div class="addons-section">
              <div class="addon-header">
                <h3>Add-Ons <span class="addon-badge">Optional</span></h3>
                <span class="addon-total-price">₹250 (All features)</span>
              </div>
              
              <div class="addon-item" (click)="toggleAddonBundle()">
                <label class="checkbox-container">
                  <span class="checkmark" [class.checked]="addonBundle"></span>
                  <div class="addon-info">
                    <span class="addon-name">Complete Add-On Bundle</span>
                    <span class="addon-desc">E-Invoice, E-Way Bill, WhatsApp, Email</span>
                  </div>
                </label>
              </div>
            </div>

            <div class="monthly-total">
              <span>Monthly Total:</span>
              <span class="monthly-amount">₹{{ monthlyTotal }}</span>
            </div>
          </div>
        </div>

        <!-- Right Column - Price Breakdown (Yearly) -->
        <div class="price-breakdown">
          <div class="price-card">
            <h2>Price Breakdown <span class="billing-badge yearly">Yearly Billing</span></h2>

            <!-- Subscription Year Dropdown -->
            <div class="subscription-year-section">
              <div class="subscription-header">
                <span class="subscription-label">Subscription Period</span>
                <span class="subscription-discount">{{ subscriptionYears }} Year - {{ subscriptionDiscountPercentage }}% OFF</span>
              </div>
              <div class="subscription-dropdown">
                <select class="year-select" [(ngModel)]="subscriptionYears" (change)="onSubscriptionYearsChange()">
                  <option value="1">1 Year (0% OFF)</option>
                  <option value="2">2 Years (10% OFF)</option>
                  <option value="3">3 Years (20% OFF)</option>
                  <option value="4">4 Years (30% OFF)</option>
                  <option value="5">5 Years (40% OFF)</option>
                </select>
                <i class="fas fa-chevron-down dropdown-icon"></i>
              </div>
            </div>

            <!-- Price Items -->
            <div class="price-list">
              <div class="price-item">
                <span>Base Plan (Basic)</span>
                <span>₹{{ basePlanYearly | number }}/{{ subscriptionYears }} yr</span>
              </div>
              
              <div class="price-item">
                <span>Additional Users ({{ additionalUsersCount }})</span>
                <span>{{ additionalUsersCost > 0 ? '+' : '' }} ₹{{ additionalUsersYearly | number }}/{{ subscriptionYears }} yr</span>
              </div>
              
              <div class="price-item">
                <span>Additional Firms ({{ additionalFirmsCount }})</span>
                <span>{{ additionalFirmsCost > 0 ? '+' : '' }} ₹{{ additionalFirmsYearly | number }}/{{ subscriptionYears }} yr</span>
              </div>
              
              <div class="price-item">
                <span>Add-On Bundle</span>
                <span>{{ addonBundle ? '+' : '' }} ₹{{ addonBundleYearly | number }}/{{ subscriptionYears }} yr</span>
              </div>
              
              <!-- Subscription Discount -->
              <div class="price-item discount-item" *ngIf="subscriptionYears > 1">
                <span>Multi-Year Discount ({{ subscriptionDiscountPercentage }}%)</span>
                <span>- ₹{{ subscriptionDiscountAmount | number }}</span>
              </div>
            </div>

            <!-- Promo Code Section -->
            <div class="promo-section-breakdown">
              <div class="promo-header">
                <span class="promo-label">Promotional Code</span>
              </div>
              <div class="promo-input-group">
                <input 
                  type="text" 
                  placeholder="Enter promo code"
                  [(ngModel)]="promoInputCode"
                  class="promo-input"
                >
                <button class="promo-check-btn" (click)="applyPromoCode()">Apply</button>
              </div>
              <div class="promo-message" *ngIf="promoMessage">
                <i class="fas" [class.fa-check-circle]="promoValid" [class.fa-times-circle]="!promoValid"></i>
                {{ promoMessage }}
              </div>
            </div>

            <!-- Promo Discount -->
            <div class="price-list" *ngIf="promoDiscountMonthly > 0">
              <div class="price-item discount-item">
                <span>Promo Discount ({{ promoCodeDisplay }})</span>
                <span>- ₹{{ promoDiscountYearly | number }}</span>
              </div>
            </div>

            <div class="price-divider"></div>

            <!-- Summary -->
            <div class="price-summary">
              <div class="summary-row">
                <span class="summary-label">Subtotal (Before Discount)</span>
                <span class="summary-value">₹{{ subtotalBeforeDiscount | number }}</span>
              </div>
              
              <div class="summary-row" *ngIf="totalDiscount > 0">
                <span class="summary-label discount-label">Total Discount</span>
                <span class="summary-value discount-value">- ₹{{ totalDiscount | number }}</span>
              </div>
              
              <div class="summary-row subtotal-row">
                <span class="summary-label">Subtotal After Discount</span>
                <span class="summary-value">₹{{ subtotalAfterDiscount | number }}</span>
              </div>
              
              <div class="summary-row gst-row">
                <span class="summary-label">GST (18%)</span>
                <span class="summary-value">+ ₹{{ gstAmount | number }}</span>
              </div>
            </div>

            <div class="price-divider"></div>

            <!-- Total Amount -->
            <div class="total-amount">
              <div class="total-label">Total Amount ({{ subscriptionYears }} Year)</div>
              <div class="total-value">₹{{ totalAmount | number }}</div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
              <button class="btn btn-cancel">Cancel</button>
              <button class="btn btn-proceed">Proceed to Payment</button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
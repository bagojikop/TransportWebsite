<div class="dashboard-container">
  <!-- Sidebar Component -->
  <app-sidebar></app-sidebar>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Header -->
    <div class="header">
      <div class="user-info" (click)="navigateToProfile()">
        <div class="avatar">{{ entity?.name?.charAt(0).toUpperCase() }}</div>
        <span>Welcome, {{ entity?.name }}</span>
      </div>
    </div>

    <!-- Dashboard Content -->
    <div class="content">
      <!-- Single Column Layout -->
      <div class="dashboard-single">
        <!-- Domain Information Card -->
        <div class="card domain-card">
          <div class="card-header">
            <h2>Domain Information</h2>
            <span class="badge" [ngClass]="entity?.isAction ? 'badge-active' : 'badge-inactive'">
              {{ entity?.isAction ? 'Active' : 'Inactive' }}
            </span>
          </div>
          <div class="card-content">
            <div class="info-row">
              <span class="info-label">Your Business Domain</span>
              <span class="info-value domain-link">
                <a href="https://{{entity?.subdomain}}.veererp.com" target="_blank">
                  https://{{entity?.subdomain}}.veererp.com
                </a>
              </span>
            </div>
            <div class="info-row">
              <span class="info-label">Created On</span>
              <span class="info-value">{{ entity?.createdUtc | date:'mediumDate' }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Active Firms</span>
              <span class="info-value firm-count">
                {{ entity?.firms || 0 }}
                <button *ngIf="!entity?.firms" class="create-firm-btn" (click)="createFirm()">
                  + Create Firm
                </button>
              </span>
            </div>
            <div class="info-row">
              <span class="info-label">Active Users</span>
              <span class="info-value">{{ entity?.users || 0 }}</span>
            </div>
          </div>
        </div>

        <!-- Subscription Validity Card -->
        <div class="card subscription-card">
          <div class="card-header">
            <h2>Subscription Validity</h2>
            <span class="badge" [ngClass]="{
              'badge-active': entity.lic?.status === 'Active',
              'badge-warning': entity.lic?.status === 'ExpiringSoon' || entity.lic?.status === 'Expiring Soon',
              'badge-expired': entity.lic?.status === 'Expired'
            }">
              {{ entity.lic?.status }}
            </span>
          </div>
          <div class="card-content">
            <div class="info-row">
              <span class="info-label">Current Plan</span>
              <span class="info-value plan-badge">
                {{ entity.lic?.licenseType }} | {{ entity.lic?.licenseKey }}
              </span>
            </div>
            <div class="info-row">
              <span class="info-label">Valid From</span>
              <span class="info-value">{{ entity.lic?.issuedDate }}</span>
            </div>
            <div class="info-row">
              <span class="info-label">Valid To</span>
              <span class="info-value">{{ entity.lic?.expiryDate }}</span>
            </div>
            <div class="info-row status-row">
              <span class="info-label">Status</span>
              <span class="info-value status-badge" [ngClass]="{
                'status-active': entity.lic?.status === 'Active',
                'status-warning': entity.lic?.status === 'ExpiringSoon' || entity.lic?.status === 'Expiring Soon',
                'status-expired': entity.lic?.status === 'Expired'
              }">
                {{ entity.lic?.status }}
              </span>
            </div>

            <!-- Warning Messages -->
            <div class="message warning" *ngIf="entity.lic?.status === 'ExpiringSoon' || entity.lic?.status === 'Expiring Soon'">
              <span class="message-icon">⚠️</span>
              <span class="message-text">Please renew immediately to avoid any interruption to your business operations.</span>
            </div>
            
            <div class="message error" *ngIf="entity.lic?.status === 'Expired'">
              <span class="message-icon">❌</span>
              <span class="message-text">Service has been stopped. Please renew to continue.</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>